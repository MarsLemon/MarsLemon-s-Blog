"use strict";exports.id=2,exports.ids=[2],exports.modules={12002:(e,t,s)=>{s.d(t,{g:()=>k});var i=s(23639),a=s(93602),r=s(73498),n=s(37115),l=s(71754),d=s(76053);let o=a.forwardRef(({className:e,...t},s)=>(0,i.jsx)("textarea",{className:(0,d.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:s,...t}));o.displayName="Textarea";var c=s(39132),u=s(73710),m=s(43458);let p=a.forwardRef(({className:e,...t},s)=>(0,i.jsx)(u.bL,{ref:s,className:(0,d.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:(0,i.jsx)(u.C1,{className:(0,d.cn)("flex items-center justify-center text-current"),children:(0,i.jsx)(m.A,{className:"h-4 w-4"})})}));p.displayName=u.bL.displayName;var x=s(2518),f=s(40681);let h=f.bL,g=a.forwardRef(({className:e,...t},s)=>(0,i.jsx)(f.B8,{ref:s,className:(0,d.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));g.displayName=f.B8.displayName;let v=a.forwardRef(({className:e,...t},s)=>(0,i.jsx)(f.l9,{ref:s,className:(0,d.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));v.displayName=f.l9.displayName;let j=a.forwardRef(({className:e,...t},s)=>(0,i.jsx)(f.UC,{ref:s,className:(0,d.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));j.displayName=f.UC.displayName;var b=s(16513),y=s(92551),N=s(82538);function k({post:e,onSave:t}){let[s,d]=(0,a.useState)(e?.title||""),[u,m]=(0,a.useState)(e?.content||""),[f,k]=(0,a.useState)(e?.cover_image||""),[w,C]=(0,a.useState)(e?.is_featured||!1),[$,T]=(0,a.useState)(e?.is_pinned||!1),[R,S]=(0,a.useState)(!1),[z,_]=(0,a.useState)(""),[B,F]=(0,a.useState)([]),H=(0,a.useCallback)(async e=>{for(let t of e)try{let e=new FormData;e.append("file",t);let s=await fetch("/api/upload",{method:"POST",body:e});if(s.ok){let e=await s.json();F(t=>[...t,e.url]),t.type.startsWith("image/")&&!f&&k(e.url)}}catch(e){console.error("Upload failed:",e)}},[f]),{getRootProps:L,getInputProps:I,isDragActive:P}=(0,y.VB)({onDrop:H,accept:{"image/*":[".png",".jpg",".jpeg",".gif",".webp"],"video/*":[".mp4",".webm",".ogg"],"audio/*":[".mp3",".wav",".ogg"],"application/pdf":[".pdf"]}}),U=async e=>{if(e.preventDefault(),_(""),!s.trim()||!u.trim()){_("Title and content are required");return}S(!0);try{await t({title:s.trim(),content:u.trim(),cover_image:f||null,is_featured:w,is_pinned:$,id:0,slug:"",excerpt:null,author_name:"",author_avatar:"",author_bio:null,published:!1,created_at:"",updated_at:""})}catch(e){_(e.message||"Failed to save post")}finally{S(!1)}},Z=e=>{let t=document.getElementById("content");if(t){let s=t.selectionStart,i=t.selectionEnd;m(u.substring(0,s)+e+u.substring(i)),setTimeout(()=>{t.selectionStart=t.selectionEnd=s+e?.length,t.focus()},0)}};return(0,i.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,i.jsxs)("form",{onSubmit:U,className:"space-y-6",children:[z&&(0,i.jsx)(x.Fc,{variant:"destructive",children:(0,i.jsx)(x.TN,{children:z})}),(0,i.jsxs)(c.Zp,{children:[(0,i.jsx)(c.aR,{children:(0,i.jsx)(c.ZB,{children:"Post Details"})}),(0,i.jsxs)(c.Wu,{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(l.J,{htmlFor:"title",children:"Title"}),(0,i.jsx)(n.p,{id:"title",value:s,onChange:e=>d(e.target.value),placeholder:"Enter post title",required:!0})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(l.J,{htmlFor:"cover-image",children:"Cover Image URL"}),(0,i.jsx)(n.p,{id:"cover-image",value:f,onChange:e=>k(e.target.value),placeholder:"Enter cover image URL"})]}),(0,i.jsxs)("div",{className:"flex gap-6",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)(p,{id:"featured",checked:w,onCheckedChange:e=>C(e)}),(0,i.jsx)(l.J,{htmlFor:"featured",children:"Featured Post"})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)(p,{id:"pinned",checked:$,onCheckedChange:e=>T(e)}),(0,i.jsx)(l.J,{htmlFor:"pinned",children:"Pin to Top"})]})]})]})]}),(0,i.jsxs)(c.Zp,{children:[(0,i.jsx)(c.aR,{children:(0,i.jsx)(c.ZB,{children:"File Upload"})}),(0,i.jsxs)(c.Wu,{children:[(0,i.jsxs)("div",{...L(),className:`border-2 border-dashed rounded-lg p-6 text-center cursor-pointer transition-colors ${P?"border-primary bg-primary/5":"border-gray-300 hover:border-gray-400"}`,children:[(0,i.jsx)("input",{...I()}),(0,i.jsx)(b.A,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),P?(0,i.jsx)("p",{children:"Drop the files here..."}):(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-lg font-medium",children:"Drag & drop files here"}),(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"or click to select files"}),(0,i.jsx)("p",{className:"text-xs text-gray-400 mt-2",children:"Supports images, videos, audio, and PDF files"})]})]}),B?.length>0&&(0,i.jsxs)("div",{className:"mt-4",children:[(0,i.jsx)(l.J,{children:"Uploaded Files"}),(0,i.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 mt-2",children:B.map((e,t)=>(0,i.jsxs)("div",{className:"relative group",children:[(0,i.jsx)("div",{className:"bg-gray-100 rounded p-2 text-sm truncate",children:e.split("/").pop()}),(0,i.jsx)(r.$,{type:"button",variant:"outline",size:"sm",className:"mt-1 w-full bg-transparent",onClick:()=>Z(`![Image](${e})`),children:"Insert"})]},t))})]})]})]}),(0,i.jsxs)(c.Zp,{children:[(0,i.jsx)(c.aR,{children:(0,i.jsx)(c.ZB,{children:"Content"})}),(0,i.jsx)(c.Wu,{children:(0,i.jsxs)(h,{defaultValue:"write",className:"w-full",children:[(0,i.jsxs)(g,{children:[(0,i.jsx)(v,{value:"write",children:"Write"}),(0,i.jsx)(v,{value:"preview",children:"Preview"})]}),(0,i.jsxs)(j,{value:"write",className:"space-y-4",children:[(0,i.jsxs)("div",{className:"flex flex-wrap gap-2 mb-2",children:[(0,i.jsx)(r.$,{type:"button",variant:"outline",size:"sm",onClick:()=>Z("**Bold Text**"),children:"Bold"}),(0,i.jsx)(r.$,{type:"button",variant:"outline",size:"sm",onClick:()=>Z("*Italic Text*"),children:"Italic"}),(0,i.jsx)(r.$,{type:"button",variant:"outline",size:"sm",onClick:()=>Z("~~Strikethrough~~"),children:"Strike"}),(0,i.jsx)(r.$,{type:"button",variant:"outline",size:"sm",onClick:()=>Z("\n# Heading 1\n"),children:"H1"}),(0,i.jsx)(r.$,{type:"button",variant:"outline",size:"sm",onClick:()=>Z("\n## Heading 2\n"),children:"H2"}),(0,i.jsx)(r.$,{type:"button",variant:"outline",size:"sm",onClick:()=>Z("\n### Heading 3\n"),children:"H3"}),(0,i.jsx)(r.$,{type:"button",variant:"outline",size:"sm",onClick:()=>Z("\n- List item\n"),children:"List"}),(0,i.jsx)(r.$,{type:"button",variant:"outline",size:"sm",onClick:()=>Z("\n1. Numbered item\n"),children:"Numbers"}),(0,i.jsx)(r.$,{type:"button",variant:"outline",size:"sm",onClick:()=>Z("- [ ] Task item\n"),children:"Task"}),(0,i.jsx)(r.$,{type:"button",variant:"outline",size:"sm",onClick:()=>Z("[Link Text](https://example.com)"),children:"Link"}),(0,i.jsx)(r.$,{type:"button",variant:"outline",size:"sm",onClick:()=>Z("![Alt Text](image-url)"),children:"Image"}),(0,i.jsx)(r.$,{type:"button",variant:"outline",size:"sm",onClick:()=>Z("\n```javascript\ncode here\n```\n"),children:"Code"}),(0,i.jsx)(r.$,{type:"button",variant:"outline",size:"sm",onClick:()=>Z("\n> Blockquote\n"),children:"Quote"}),(0,i.jsx)(r.$,{type:"button",variant:"outline",size:"sm",onClick:()=>Z("\n| Header 1 | Header 2 |\n|----------|----------|\n| Cell 1   | Cell 2   |\n"),children:"Table"}),(0,i.jsx)(r.$,{type:"button",variant:"outline",size:"sm",onClick:()=>Z("\n> [!NOTE]\n> This is a note\n"),children:"Alert"})]}),(0,i.jsx)(o,{id:"content",value:u,onChange:e=>m(e.target.value),placeholder:"Write your post content in Markdown...",className:"min-h-[400px] font-mono",required:!0})]}),(0,i.jsx)(j,{value:"preview",children:(0,i.jsx)("div",{className:"prose prose-gray dark:prose-invert max-w-none min-h-[400px] p-4 border rounded-md",dangerouslySetInnerHTML:{__html:u?N.xI.parse(u):"<p>Nothing to preview yet...</p>"}})})]})})]}),(0,i.jsxs)("div",{className:"flex gap-4",children:[(0,i.jsx)(r.$,{type:"submit",disabled:R,children:R?"Saving...":e?"Update Post":"Create Post"}),(0,i.jsx)(r.$,{type:"button",variant:"outline",onClick:()=>window.history.back(),children:"Cancel"})]})]})})}},39132:(e,t,s)=>{s.d(t,{BT:()=>o,Wu:()=>c,ZB:()=>d,Zp:()=>n,aR:()=>l});var i=s(23639),a=s(93602),r=s(76053);let n=a.forwardRef(({className:e,...t},s)=>(0,i.jsx)("div",{ref:s,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));n.displayName="Card";let l=a.forwardRef(({className:e,...t},s)=>(0,i.jsx)("div",{ref:s,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",e),...t}));l.displayName="CardHeader";let d=a.forwardRef(({className:e,...t},s)=>(0,i.jsx)("div",{ref:s,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));d.displayName="CardTitle";let o=a.forwardRef(({className:e,...t},s)=>(0,i.jsx)("div",{ref:s,className:(0,r.cn)("text-sm text-muted-foreground",e),...t}));o.displayName="CardDescription";let c=a.forwardRef(({className:e,...t},s)=>(0,i.jsx)("div",{ref:s,className:(0,r.cn)("p-6 pt-0",e),...t}));c.displayName="CardContent",a.forwardRef(({className:e,...t},s)=>(0,i.jsx)("div",{ref:s,className:(0,r.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"}};