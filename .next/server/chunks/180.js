"use strict";exports.id=180,exports.ids=[180],exports.modules={5180:(e,t,i)=>{i.d(t,{g:()=>N});var s=i(89812),n=i(49837),r=i(43394),a=i(76576),l=i(65698),o=i(87677);let d=n.forwardRef(({className:e,...t},i)=>(0,s.jsx)("textarea",{className:(0,o.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:i,...t}));d.displayName="Textarea";var c=i(53380),u=i(76468),m=i(43509);let p=n.forwardRef(({className:e,...t},i)=>(0,s.jsx)(u.bL,{ref:i,className:(0,o.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:(0,s.jsx)(u.C1,{className:(0,o.cn)("flex items-center justify-center text-current"),children:(0,s.jsx)(m.A,{className:"h-4 w-4"})})}));p.displayName=u.bL.displayName;var x=i(65246),f=i(36915);let h=f.bL,g=n.forwardRef(({className:e,...t},i)=>(0,s.jsx)(f.B8,{ref:i,className:(0,o.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));g.displayName=f.B8.displayName;let b=n.forwardRef(({className:e,...t},i)=>(0,s.jsx)(f.l9,{ref:i,className:(0,o.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));b.displayName=f.l9.displayName;let v=n.forwardRef(({className:e,...t},i)=>(0,s.jsx)(f.UC,{ref:i,className:(0,o.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));v.displayName=f.UC.displayName;var j=i(12700),y=i(60055);function N({post:e,onSave:t}){let[o,u]=(0,n.useState)(e?.title||""),[m,f]=(0,n.useState)(e?.content||""),[N,k]=(0,n.useState)(e?.cover_image||""),[w,C]=(0,n.useState)(e?.is_featured||!1),[$,S]=(0,n.useState)(e?.is_pinned||!1),[T,z]=(0,n.useState)(!1),[F,R]=(0,n.useState)(""),[B,I]=(0,n.useState)([]),L=(0,n.useCallback)(async e=>{for(let t of e)try{let e=new FormData;e.append("file",t);let i=await fetch("/api/upload",{method:"POST",body:e});if(i.ok){let e=await i.json();I(t=>[...t,e.url]),t.type.startsWith("image/")&&!N&&k(e.url)}}catch(e){console.error("Upload failed:",e)}},[N]),{getRootProps:H,getInputProps:P,isDragActive:U}=(0,y.VB)({onDrop:L,accept:{"image/*":[".png",".jpg",".jpeg",".gif",".webp"],"video/*":[".mp4",".webm",".ogg"],"audio/*":[".mp3",".wav",".ogg"],"application/pdf":[".pdf"]}}),_=async e=>{if(e.preventDefault(),R(""),!o.trim()||!m.trim()){R("Title and content are required");return}z(!0);try{await t({title:o.trim(),content:m.trim(),cover_image:N||null,is_featured:w,is_pinned:$})}catch(e){R(e.message||"Failed to save post")}finally{z(!1)}},D=e=>{let t=document.getElementById("content");if(t){let i=t.selectionStart,s=t.selectionEnd;f(m.substring(0,i)+e+m.substring(s)),setTimeout(()=>{t.selectionStart=t.selectionEnd=i+e.length,t.focus()},0)}};return(0,s.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,s.jsxs)("form",{onSubmit:_,className:"space-y-6",children:[F&&(0,s.jsx)(x.Fc,{variant:"destructive",children:(0,s.jsx)(x.TN,{children:F})}),(0,s.jsxs)(c.Zp,{children:[(0,s.jsx)(c.aR,{children:(0,s.jsx)(c.ZB,{children:"Post Details"})}),(0,s.jsxs)(c.Wu,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(l.J,{htmlFor:"title",children:"Title"}),(0,s.jsx)(a.p,{id:"title",value:o,onChange:e=>u(e.target.value),placeholder:"Enter post title",required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(l.J,{htmlFor:"cover-image",children:"Cover Image URL"}),(0,s.jsx)(a.p,{id:"cover-image",value:N,onChange:e=>k(e.target.value),placeholder:"Enter cover image URL"})]}),(0,s.jsxs)("div",{className:"flex gap-6",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(p,{id:"featured",checked:w,onCheckedChange:e=>C(e)}),(0,s.jsx)(l.J,{htmlFor:"featured",children:"Featured Post"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(p,{id:"pinned",checked:$,onCheckedChange:e=>S(e)}),(0,s.jsx)(l.J,{htmlFor:"pinned",children:"Pin to Top"})]})]})]})]}),(0,s.jsxs)(c.Zp,{children:[(0,s.jsx)(c.aR,{children:(0,s.jsx)(c.ZB,{children:"File Upload"})}),(0,s.jsxs)(c.Wu,{children:[(0,s.jsxs)("div",{...H(),className:`border-2 border-dashed rounded-lg p-6 text-center cursor-pointer transition-colors ${U?"border-primary bg-primary/5":"border-gray-300 hover:border-gray-400"}`,children:[(0,s.jsx)("input",{...P()}),(0,s.jsx)(j.A,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),U?(0,s.jsx)("p",{children:"Drop the files here..."}):(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-lg font-medium",children:"Drag & drop files here"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"or click to select files"}),(0,s.jsx)("p",{className:"text-xs text-gray-400 mt-2",children:"Supports images, videos, audio, and PDF files"})]})]}),B.length>0&&(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)(l.J,{children:"Uploaded Files"}),(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 mt-2",children:B.map((e,t)=>(0,s.jsxs)("div",{className:"relative group",children:[(0,s.jsx)("div",{className:"bg-gray-100 rounded p-2 text-sm truncate",children:e.split("/").pop()}),(0,s.jsx)(r.$,{type:"button",variant:"outline",size:"sm",className:"mt-1 w-full bg-transparent",onClick:()=>D(`![Image](${e})`),children:"Insert"})]},t))})]})]})]}),(0,s.jsxs)(c.Zp,{children:[(0,s.jsx)(c.aR,{children:(0,s.jsx)(c.ZB,{children:"Content"})}),(0,s.jsx)(c.Wu,{children:(0,s.jsxs)(h,{defaultValue:"write",className:"w-full",children:[(0,s.jsxs)(g,{children:[(0,s.jsx)(b,{value:"write",children:"Write"}),(0,s.jsx)(b,{value:"preview",children:"Preview"})]}),(0,s.jsxs)(v,{value:"write",className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex flex-wrap gap-2 mb-2",children:[(0,s.jsx)(r.$,{type:"button",variant:"outline",size:"sm",onClick:()=>D("**Bold Text**"),children:"Bold"}),(0,s.jsx)(r.$,{type:"button",variant:"outline",size:"sm",onClick:()=>D("*Italic Text*"),children:"Italic"}),(0,s.jsx)(r.$,{type:"button",variant:"outline",size:"sm",onClick:()=>D("~~Strikethrough~~"),children:"Strike"}),(0,s.jsx)(r.$,{type:"button",variant:"outline",size:"sm",onClick:()=>D("\n# Heading 1\n"),children:"H1"}),(0,s.jsx)(r.$,{type:"button",variant:"outline",size:"sm",onClick:()=>D("\n## Heading 2\n"),children:"H2"}),(0,s.jsx)(r.$,{type:"button",variant:"outline",size:"sm",onClick:()=>D("\n### Heading 3\n"),children:"H3"}),(0,s.jsx)(r.$,{type:"button",variant:"outline",size:"sm",onClick:()=>D("\n- List item\n"),children:"List"}),(0,s.jsx)(r.$,{type:"button",variant:"outline",size:"sm",onClick:()=>D("\n1. Numbered item\n"),children:"Numbers"}),(0,s.jsx)(r.$,{type:"button",variant:"outline",size:"sm",onClick:()=>D("- [ ] Task item\n"),children:"Task"}),(0,s.jsx)(r.$,{type:"button",variant:"outline",size:"sm",onClick:()=>D("[Link Text](https://example.com)"),children:"Link"}),(0,s.jsx)(r.$,{type:"button",variant:"outline",size:"sm",onClick:()=>D("![Alt Text](image-url)"),children:"Image"}),(0,s.jsx)(r.$,{type:"button",variant:"outline",size:"sm",onClick:()=>D("\n```javascript\ncode here\n```\n"),children:"Code"}),(0,s.jsx)(r.$,{type:"button",variant:"outline",size:"sm",onClick:()=>D("\n> Blockquote\n"),children:"Quote"}),(0,s.jsx)(r.$,{type:"button",variant:"outline",size:"sm",onClick:()=>D("\n| Header 1 | Header 2 |\n|----------|----------|\n| Cell 1   | Cell 2   |\n"),children:"Table"}),(0,s.jsx)(r.$,{type:"button",variant:"outline",size:"sm",onClick:()=>D("\n> [!NOTE]\n> This is a note\n"),children:"Alert"})]}),(0,s.jsx)(d,{id:"content",value:m,onChange:e=>f(e.target.value),placeholder:"Write your post content in Markdown...",className:"min-h-[400px] font-mono",required:!0})]}),(0,s.jsx)(v,{value:"preview",children:(0,s.jsx)("div",{className:"prose prose-gray dark:prose-invert max-w-none min-h-[400px] p-4 border rounded-md",dangerouslySetInnerHTML:{__html:m?i(29858).xI(m):"<p>Nothing to preview yet...</p>"}})})]})})]}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)(r.$,{type:"submit",disabled:T,children:T?"Saving...":e?"Update Post":"Create Post"}),(0,s.jsx)(r.$,{type:"button",variant:"outline",onClick:()=>window.history.back(),children:"Cancel"})]})]})})}},65698:(e,t,i)=>{i.d(t,{J:()=>d});var s=i(89812),n=i(49837),r=i(18355),a=i(49602),l=i(87677);let o=(0,a.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=n.forwardRef(({className:e,...t},i)=>(0,s.jsx)(r.b,{ref:i,className:(0,l.cn)(o(),e),...t}));d.displayName=r.b.displayName},76576:(e,t,i)=>{i.d(t,{p:()=>a});var s=i(89812),n=i(49837),r=i(87677);let a=n.forwardRef(({className:e,type:t,...i},n)=>(0,s.jsx)("input",{type:t,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...i}));a.displayName="Input"}};