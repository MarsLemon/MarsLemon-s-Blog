(()=>{var e={};e.id=490,e.ids=[490],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},13122:(e,t,r)=>{"use strict";r.d(t,{Ec:()=>u,Jv:()=>p,ic:()=>i});var s=r(7673),a=r(19246);async function n(e){return s.Ay.hash(e,12)}async function o(e,t){return s.Ay.compare(e,t)}async function u(){return(await (0,a.l)`SELECT COUNT(*) as count FROM admin`)[0].count>0}async function i(e){let t=await n(e);await (0,a.l)`INSERT INTO admin (password_hash) VALUES (${t})`}async function p(e){let t=await (0,a.l)`SELECT password_hash FROM admin LIMIT 1`;return 0!==t.length&&o(e,t[0].password_hash)}},19246:(e,t,r)=>{"use strict";r.d(t,{l:()=>a});var s=r(70121);r(36154);let a=(0,s.lw)(process.env.DATABASE_URL)},19654:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>m,routeModule:()=>d,serverHooks:()=>h,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>x});var s={};r.r(s),r.d(s,{GET:()=>p,POST:()=>c});var a=r(36044),n=r(63409),o=r(9576),u=r(10949),i=r(13122);async function p(){try{let e=await (0,i.Ec)();return u.NextResponse.json({adminExists:e})}catch(e){return u.NextResponse.json({error:"Database error"},{status:500})}}async function c(e){try{let{password:t}=await e.json();if(!t||t.length<6)return u.NextResponse.json({error:"Password must be at least 6 characters"},{status:400});if(await (0,i.Ec)())return u.NextResponse.json({error:"Admin already exists"},{status:400});return await (0,i.ic)(t),u.NextResponse.json({success:!0})}catch(e){return u.NextResponse.json({error:"Failed to create admin"},{status:500})}}let d=new a.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/auth/setup/route",pathname:"/api/auth/setup",filename:"route",bundlePath:"app/api/auth/setup/route"},resolvedPagePath:"E:\\front\\MarsLemon's-Blog\\app\\api\\auth\\setup\\route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:l,workUnitAsyncStorage:x,serverHooks:h}=d;function m(){return(0,o.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:x})}},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30496:()=>{},36154:(e,t,r)=>{"use strict";r.d(t,{_:()=>s});let s={GITHUB_OWNER:"MarsLemon",GITHUB_REPO:"MarsLemon-s-Blog",GITHUB_BRANCH:"main",GITHUB_TOKEN:"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",JWT_SECRET:"MarsLemon",DATABASE_URL:"postgres://neondb_owner:npg_S3FPlxKdyQ6j@ep-floral-heart-adkjfqfm-pooler.c-2.us-east-1.aws.neon.tech/neondb?sslmode=require"}},43648:()=>{},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},55511:e=>{"use strict";e.exports=require("crypto")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[95,121,920,673],()=>r(19654));module.exports=s})();