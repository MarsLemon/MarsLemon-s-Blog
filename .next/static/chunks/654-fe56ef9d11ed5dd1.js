"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[654],{654:(e,t,r)=>{r.d(t,{g:()=>N});var i=r(2432),s=r(364),n=r(2708),a=r(7304),l=r(2438),d=r(4963);let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,i.jsx)("textarea",{className:(0,d.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...s})});o.displayName="Textarea";var c=r(7382),u=r(8251),m=r(3491);let f=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,i.jsx)(u.bL,{ref:t,className:(0,d.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",r),...s,children:(0,i.jsx)(u.C1,{className:(0,d.cn)("flex items-center justify-center text-current"),children:(0,i.jsx)(m.A,{className:"h-4 w-4"})})})});f.displayName=u.bL.displayName;var p=r(7886),x=r(75);let g=x.bL,v=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,i.jsx)(x.B8,{ref:t,className:(0,d.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",r),...s})});v.displayName=x.B8.displayName;let h=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,i.jsx)(x.l9,{ref:t,className:(0,d.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",r),...s})});h.displayName=x.l9.displayName;let b=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,i.jsx)(x.UC,{ref:t,className:(0,d.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),...s})});b.displayName=x.UC.displayName;var j=r(8652),y=r(5034);function N(e){let{post:t,onSave:d}=e,[u,m]=(0,s.useState)((null==t?void 0:t.title)||""),[x,N]=(0,s.useState)((null==t?void 0:t.content)||""),[w,k]=(0,s.useState)((null==t?void 0:t.cover_image)||""),[C,R]=(0,s.useState)((null==t?void 0:t.is_featured)||!1),[T,$]=(0,s.useState)((null==t?void 0:t.is_pinned)||!1),[z,S]=(0,s.useState)(!1),[F,_]=(0,s.useState)(""),[B,H]=(0,s.useState)([]),I=(0,s.useCallback)(async e=>{for(let t of e)try{let e=new FormData;e.append("file",t);let r=await fetch("/api/upload",{method:"POST",body:e});if(r.ok){let e=await r.json();H(t=>[...t,e.url]),t.type.startsWith("image/")&&!w&&k(e.url)}}catch(e){console.error("Upload failed:",e)}},[w]),{getRootProps:L,getInputProps:D,isDragActive:P}=(0,y.VB)({onDrop:I,accept:{"image/*":[".png",".jpg",".jpeg",".gif",".webp"],"video/*":[".mp4",".webm",".ogg"],"audio/*":[".mp3",".wav",".ogg"],"application/pdf":[".pdf"]}}),A=async e=>{if(e.preventDefault(),_(""),!u.trim()||!x.trim()){_("Title and content are required");return}S(!0);try{await d({title:u.trim(),content:x.trim(),cover_image:w||null,is_featured:C,is_pinned:T})}catch(e){_(e.message||"Failed to save post")}finally{S(!1)}},E=e=>{let t=document.getElementById("content");if(t){let r=t.selectionStart,i=t.selectionEnd;N(x.substring(0,r)+e+x.substring(i)),setTimeout(()=>{t.selectionStart=t.selectionEnd=r+e.length,t.focus()},0)}};return(0,i.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,i.jsxs)("form",{onSubmit:A,className:"space-y-6",children:[F&&(0,i.jsx)(p.Fc,{variant:"destructive",children:(0,i.jsx)(p.TN,{children:F})}),(0,i.jsxs)(c.Zp,{children:[(0,i.jsx)(c.aR,{children:(0,i.jsx)(c.ZB,{children:"Post Details"})}),(0,i.jsxs)(c.Wu,{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(l.J,{htmlFor:"title",children:"Title"}),(0,i.jsx)(a.p,{id:"title",value:u,onChange:e=>m(e.target.value),placeholder:"Enter post title",required:!0})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(l.J,{htmlFor:"cover-image",children:"Cover Image URL"}),(0,i.jsx)(a.p,{id:"cover-image",value:w,onChange:e=>k(e.target.value),placeholder:"Enter cover image URL"})]}),(0,i.jsxs)("div",{className:"flex gap-6",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)(f,{id:"featured",checked:C,onCheckedChange:e=>R(e)}),(0,i.jsx)(l.J,{htmlFor:"featured",children:"Featured Post"})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)(f,{id:"pinned",checked:T,onCheckedChange:e=>$(e)}),(0,i.jsx)(l.J,{htmlFor:"pinned",children:"Pin to Top"})]})]})]})]}),(0,i.jsxs)(c.Zp,{children:[(0,i.jsx)(c.aR,{children:(0,i.jsx)(c.ZB,{children:"File Upload"})}),(0,i.jsxs)(c.Wu,{children:[(0,i.jsxs)("div",{...L(),className:"border-2 border-dashed rounded-lg p-6 text-center cursor-pointer transition-colors ".concat(P?"border-primary bg-primary/5":"border-gray-300 hover:border-gray-400"),children:[(0,i.jsx)("input",{...D()}),(0,i.jsx)(j.A,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),P?(0,i.jsx)("p",{children:"Drop the files here..."}):(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-lg font-medium",children:"Drag & drop files here"}),(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"or click to select files"}),(0,i.jsx)("p",{className:"text-xs text-gray-400 mt-2",children:"Supports images, videos, audio, and PDF files"})]})]}),B.length>0&&(0,i.jsxs)("div",{className:"mt-4",children:[(0,i.jsx)(l.J,{children:"Uploaded Files"}),(0,i.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 mt-2",children:B.map((e,t)=>(0,i.jsxs)("div",{className:"relative group",children:[(0,i.jsx)("div",{className:"bg-gray-100 rounded p-2 text-sm truncate",children:e.split("/").pop()}),(0,i.jsx)(n.$,{type:"button",variant:"outline",size:"sm",className:"mt-1 w-full bg-transparent",onClick:()=>E("![Image](".concat(e,")")),children:"Insert"})]},t))})]})]})]}),(0,i.jsxs)(c.Zp,{children:[(0,i.jsx)(c.aR,{children:(0,i.jsx)(c.ZB,{children:"Content"})}),(0,i.jsx)(c.Wu,{children:(0,i.jsxs)(g,{defaultValue:"write",className:"w-full",children:[(0,i.jsxs)(v,{children:[(0,i.jsx)(h,{value:"write",children:"Write"}),(0,i.jsx)(h,{value:"preview",children:"Preview"})]}),(0,i.jsxs)(b,{value:"write",className:"space-y-4",children:[(0,i.jsxs)("div",{className:"flex flex-wrap gap-2 mb-2",children:[(0,i.jsx)(n.$,{type:"button",variant:"outline",size:"sm",onClick:()=>E("**Bold Text**"),children:"Bold"}),(0,i.jsx)(n.$,{type:"button",variant:"outline",size:"sm",onClick:()=>E("*Italic Text*"),children:"Italic"}),(0,i.jsx)(n.$,{type:"button",variant:"outline",size:"sm",onClick:()=>E("~~Strikethrough~~"),children:"Strike"}),(0,i.jsx)(n.$,{type:"button",variant:"outline",size:"sm",onClick:()=>E("\n# Heading 1\n"),children:"H1"}),(0,i.jsx)(n.$,{type:"button",variant:"outline",size:"sm",onClick:()=>E("\n## Heading 2\n"),children:"H2"}),(0,i.jsx)(n.$,{type:"button",variant:"outline",size:"sm",onClick:()=>E("\n### Heading 3\n"),children:"H3"}),(0,i.jsx)(n.$,{type:"button",variant:"outline",size:"sm",onClick:()=>E("\n- List item\n"),children:"List"}),(0,i.jsx)(n.$,{type:"button",variant:"outline",size:"sm",onClick:()=>E("\n1. Numbered item\n"),children:"Numbers"}),(0,i.jsx)(n.$,{type:"button",variant:"outline",size:"sm",onClick:()=>E("- [ ] Task item\n"),children:"Task"}),(0,i.jsx)(n.$,{type:"button",variant:"outline",size:"sm",onClick:()=>E("[Link Text](https://example.com)"),children:"Link"}),(0,i.jsx)(n.$,{type:"button",variant:"outline",size:"sm",onClick:()=>E("![Alt Text](image-url)"),children:"Image"}),(0,i.jsx)(n.$,{type:"button",variant:"outline",size:"sm",onClick:()=>E("\n```javascript\ncode here\n```\n"),children:"Code"}),(0,i.jsx)(n.$,{type:"button",variant:"outline",size:"sm",onClick:()=>E("\n> Blockquote\n"),children:"Quote"}),(0,i.jsx)(n.$,{type:"button",variant:"outline",size:"sm",onClick:()=>E("\n| Header 1 | Header 2 |\n|----------|----------|\n| Cell 1   | Cell 2   |\n"),children:"Table"}),(0,i.jsx)(n.$,{type:"button",variant:"outline",size:"sm",onClick:()=>E("\n> [!NOTE]\n> This is a note\n"),children:"Alert"})]}),(0,i.jsx)(o,{id:"content",value:x,onChange:e=>N(e.target.value),placeholder:"Write your post content in Markdown...",className:"min-h-[400px] font-mono",required:!0})]}),(0,i.jsx)(b,{value:"preview",children:(0,i.jsx)("div",{className:"prose prose-gray dark:prose-invert max-w-none min-h-[400px] p-4 border rounded-md",dangerouslySetInnerHTML:{__html:x?r(6271).xI(x):"<p>Nothing to preview yet...</p>"}})})]})})]}),(0,i.jsxs)("div",{className:"flex gap-4",children:[(0,i.jsx)(n.$,{type:"submit",disabled:z,children:z?"Saving...":t?"Update Post":"Create Post"}),(0,i.jsx)(n.$,{type:"button",variant:"outline",onClick:()=>window.history.back(),children:"Cancel"})]})]})})}},2438:(e,t,r)=>{r.d(t,{J:()=>o});var i=r(2432),s=r(364),n=r(3133),a=r(6992),l=r(4963);let d=(0,a.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,i.jsx)(n.b,{ref:t,className:(0,l.cn)(d(),r),...s})});o.displayName=n.b.displayName},2708:(e,t,r)=>{r.d(t,{$:()=>o});var i=r(2432),s=r(364),n=r(4793),a=r(6992),l=r(4963);let d=(0,a.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=s.forwardRef((e,t)=>{let{className:r,variant:s,size:a,asChild:o=!1,...c}=e,u=o?n.DX:"button";return(0,i.jsx)(u,{className:(0,l.cn)(d({variant:s,size:a,className:r})),ref:t,...c})});o.displayName="Button"},4963:(e,t,r)=>{r.d(t,{cn:()=>n});var i=r(2126),s=r(8441);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,i.$)(t))}},7304:(e,t,r)=>{r.d(t,{p:()=>a});var i=r(2432),s=r(364),n=r(4963);let a=s.forwardRef((e,t)=>{let{className:r,type:s,...a}=e;return(0,i.jsx)("input",{type:s,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...a})});a.displayName="Input"},7382:(e,t,r)=>{r.d(t,{BT:()=>o,Wu:()=>c,ZB:()=>d,Zp:()=>a,aR:()=>l});var i=r(2432),s=r(364),n=r(4963);let a=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,i.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});a.displayName="Card";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,i.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...s})});l.displayName="CardHeader";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,i.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});d.displayName="CardTitle";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,i.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...s})});o.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,i.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...s})});c.displayName="CardContent",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,i.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...s})}).displayName="CardFooter"},7886:(e,t,r)=>{r.d(t,{Fc:()=>d,TN:()=>o});var i=r(2432),s=r(364),n=r(6992),a=r(4963);let l=(0,n.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),d=s.forwardRef((e,t)=>{let{className:r,variant:s,...n}=e;return(0,i.jsx)("div",{ref:t,role:"alert",className:(0,a.cn)(l({variant:s}),r),...n})});d.displayName="Alert",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,i.jsx)("h5",{ref:t,className:(0,a.cn)("mb-1 font-medium leading-none tracking-tight",r),...s})}).displayName="AlertTitle";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,i.jsx)("div",{ref:t,className:(0,a.cn)("text-sm [&_p]:leading-relaxed",r),...s})});o.displayName="AlertDescription"}}]);